*╔════════════════════════════════════════════════════════════════════════╗
*║   Имя файла LongName     Разработчик Андрей Васин                      ║
*╟────────────────────────────────────────────────────────────────────────╢
*║                                                                        ║
*║                        Длинное имя для клиента                         ║
*║                                                                        ║
*╚══════════════════════════════════════════════════════════ 02.02.2007 ══╝
PROCEDURE LongName
PARAMETERS prmCode

PRIVATE s_sav, tmpLong, mss, tmpName

m.s_sav = SELECT()
SELECT 0
USE (m.base_path+"CUS_NAME") SHARED AGAIN ALIAS LN_70202 ORDER TAG CUS_CODE
IF .NOT. SEEK(m.prmCode)
  DIMENSION mss[3]
  mss[1] = ""
  mss[2] = CHR(0)+"Для клиента не предусмотрено длинного имени"
  mss[3] = ""
  DO Out_Mess WITH 5, "mss"
  USE
  SELECT (m.s_sav)
  RETURN
ENDIF

m.tmpLong = ALLTRIM(CUS_NAME)
USE (m.base_path+"ACCOUNT") SHARED AGAIN ALIAS LN_70202 ORDER TAG CUS_CODE
SEEK m.prmCode
m.tmpName = CUS_NAME
USE
SELECT (m.s_sav)
*
*  Переменные состояния для навигации
*

PRIVATE stat_type     && Тип навигации: 0 - нестандартный;
                                        1 - бланк;
                                        2 - BROWSE - таблица;
                                        3 - BROWSE - список.
PRIVATE what_do       && Имя режима.
PRIVATE menu_name     && Имя асинхронного меню.
PRIVATE last_mouse    && Время последнего нажатия звериной кнопки.
PRIVATE win_name      && Имя окна ( окон для BROWSE ).

*
*   Заполняем значениями переменные состояния...
*
m.stat_type  = 1
m.what_do    = ""
m.menu_name  = ""
m.last_mouse = 0
m.win_name   = PROGRAM()

*------------------------------------------------------------------------
*    Содержательная часть программы:
*

*┌─────────────────────────────────────────────────────────────────┐
*│    Клиент ....:....!....:....!....:....!....:....!....:....!    │
*│┌─ Полное имя ──────────────────────────────────────────────────┐│
*││....:....!....:....!....:....!....:....!....:....!....:....!...││
*││....:....!....:....!....:....!....:....!....:....!....:....!...││
*││....:....!....:....!....:....!....:....!....:....!....:....!...││
*││....:....!....:....!....:....!....:....!....:....!....:....!...││
*│└───────────────────────────────────────────────────────────────┘│
*│                             < OK >                              │
*└─────────────────────────────────────────────────────────────────┘

PRIVATE ex
m.ex = 1
*------------------------------------------------------------------------

PUSH KEY CLEAR       && На всякий пожарный случай!
DO Prp_Nav_2
DO D_Win_N WITH 11, 69, "Длинное имя клиента"
DO Sun_Bord WITH  3,  2,  8, 66, " Полное имя "

*------------------------------------------------------------------------
*      Ввод полей бланка
*
@ 2, 6 SAY "Клиент" GET m.tmpName WHEN .F.
@ 4, 3 EDIT m.tmpLong SIZE 4, 63 WHEN .F. COLOR (SCHEME(1, 1))
@ WROWS()-2, FLOOR(WCOLS()/2-3) GET m.ex PICTURE "@*HT \! OK "

READ CYCLE

*IF m.ex = 1
  *
  * Отрабатываем бланк
  
*ENDIF
*--------------------------------------------------------------------------

POP KEY
RELEASE WINDOW (win_name)
RETURN
