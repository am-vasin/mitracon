*╔════════════════════════════════════════════════════════════════════════╗
*║ Файл Set_PB       Разработчик Андрей Васин           09.08.11 13:18:41 ║
*╟────────────────────────────────────────────────────────────────────────╢
*║                                                                        ║
*║                    Флажок "создавать аваннсовые с-ф".                  ║
*║                                                                        ║
*╚════════════════════════════════════════════════════════════════════════╝
PROCEDURE Set_PB
PARAMETER sValue

*
*  Переменные состояния для навигации
*

PRIVATE stat_type     && Тип навигации: 0 - нестандартный;
                                        1 - бланк;
                                        2 - BROWSE - таблица;
                                        3 - BROWSE - список.
PRIVATE what_do       && Имя режима.
PRIVATE menu_name     && Имя асинхронного меню.
PRIVATE last_mouse    && Время последнего нажатия звериной кнопки.
PRIVATE win_name      && Имя окна ( окон для BROWSE ).

*
*   Заполняем значениями переменные состояния...
*
stat_type  = 1
what_do    = ""
menu_name  = ""
last_mouse = 0
win_name   = PROGRAM()

*------------------------------------------------------------------------
*    Содержательная часть программы:
*

PRIVATE ex, tmpValue
tmpValue = sValue
ex   = 1

*------------------------------------------------------------------------

PUSH KEY CLEAR       && На всякий пожарный случай!
DO Prp_Nav_2
DO D_Win_N WITH 5, 36, "Авансовые счета-фактуры"
*Авансовые счета-фактуры
*┌────────────────────────────────┐
*│         [ ] Создаются          │
*│< OK Ctrl-W > < Отказаться Esc >│
*└────────────────────────────────┘

*------------------------------------------------------------------------
*      Ввод полей бланка
*
@ 2, 11 GET tmpValue PICTURE "@*C Создаются"
@ 3,  2 GET ex PICTURE "@*HT \! OK Ctrl-W ;\? Отказаться Esc "

READ CYCLE

IF ex # 1 .OR. READKEY() % 256 = 12
  tmpValue = sValue
ENDIF
*--------------------------------------------------------------------------

POP KEY
RELEASE WINDOW (win_name)
RETURN tmpValue
